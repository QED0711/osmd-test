(this.webpackJsonposmd=this.webpackJsonposmd||[]).push([[0],{17:function(e){e.exports=JSON.parse('[{"note":"G3","assessment":{"pitch":true,"rhythm":true}},{"note":"A3","assessment":{"pitch":true,"rhythm":true}},{"note":"C4","assessment":{"pitch":true,"rhythm":true}},{"note":"C4","assessment":{"pitch":true,"rhythm":true}},{"note":"D4","assessment":{"pitch":true,"rhythm":true}},{"note":"D4","assessment":{"pitch":true,"rhythm":true}},{"note":"D4","assessment":{"pitch":true,"rhythm":true}},{"note":"A3","assessment":{"pitch":true,"rhythm":true}},{"note":"C4","assessment":{"pitch":true,"rhythm":true}},{"note":"A3","assessment":{"pitch":true,"rhythm":true}},{"note":"G3","assessment":{"pitch":true,"rhythm":true}},{"note":"A3","assessment":{"pitch":true,"rhythm":true}},{"note":"G3","assessment":{"pitch":true,"rhythm":true}},{"note":"D3","assessment":{"pitch":true,"rhythm":true}},{"note":"E3","assessment":{"pitch":true,"rhythm":true}},{"note":"D3","assessment":{"pitch":true,"rhythm":true}},{"note":"C3","assessment":{"pitch":true,"rhythm":true}},{"note":"A2","assessment":{"pitch":true,"rhythm":true}},{"note":"C3","assessment":{"pitch":true,"rhythm":true}},{"note":"D3","assessment":{"pitch":true,"rhythm":true}},{"note":"C3","assessment":{"pitch":true,"rhythm":true}},{"note":"G4","assessment":{"pitch":true,"rhythm":true}},{"note":"A4","assessment":{"pitch":true,"rhythm":false}},{"note":"C5","assessment":{"pitch":true,"rhythm":false}},{"note":"C5","assessment":{"pitch":true,"rhythm":true}},{"note":"D5","assessment":{"pitch":true,"rhythm":true}},{"note":"D5","assessment":{"pitch":true,"rhythm":true}},{"note":"D5","assessment":{"pitch":true,"rhythm":true}},{"note":"A4","assessment":{"pitch":true,"rhythm":true}},{"note":"G5","assessment":{"pitch":true,"rhythm":true}},{"note":"E5","assessment":{"pitch":true,"rhythm":true}},{"note":"D5","assessment":{"pitch":true,"rhythm":true}},{"note":"C5","assessment":{"pitch":true,"rhythm":true}},{"note":"A4","assessment":{"pitch":true,"rhythm":false}},{"note":"C5","assessment":{"pitch":true,"rhythm":false}},{"note":"D5","assessment":{"pitch":false,"rhythm":false}},{"note":"C5","assessment":{"pitch":false,"rhythm":true}}]')},18:function(e){e.exports=JSON.parse('[{"note":"E2","assessment":{"pitch":true,"rhythm":true}},{"note":"E4","assessment":{"pitch":false,"rhythm":true}},{"note":"B2","assessment":{"pitch":true,"rhythm":false}},{"note":"F#3/Gb3","assessment":{"pitch":false,"rhythm":true}},{"note":"B2","assessment":{"pitch":false,"rhythm":true}},{"note":"B3","assessment":{"pitch":true,"rhythm":false}},{"note":"G3","assessment":{"pitch":false,"rhythm":true}},{"note":"F#3/Gb3","assessment":{"pitch":false,"rhythm":false}},{"note":"E4","assessment":{"pitch":false,"rhythm":false}},{"note":"B3","assessment":{"pitch":false,"rhythm":true}},{"note":"E2","assessment":{"pitch":true,"rhythm":true}},{"note":"E4","assessment":{"pitch":false,"rhythm":false}},{"note":"B2","assessment":{"pitch":true,"rhythm":true}},{"note":"F#3/Gb3","assessment":{"pitch":false,"rhythm":true}},{"note":"B2","assessment":{"pitch":true,"rhythm":true}},{"note":"B3","assessment":{"pitch":false,"rhythm":true}},{"note":"G3","assessment":{"pitch":true,"rhythm":true}},{"note":"F#3/Gb3","assessment":{"pitch":false,"rhythm":false}},{"note":"E4","assessment":{"pitch":false,"rhythm":false}},{"note":"B3","assessment":{"pitch":false,"rhythm":true}},{"note":"A2","assessment":{"pitch":false,"rhythm":true}},{"note":"C4","assessment":{"pitch":false,"rhythm":true}},{"note":"B3","assessment":{"pitch":false,"rhythm":true}},{"note":"E3","assessment":{"pitch":false,"rhythm":false}},{"note":"A2","assessment":{"pitch":true,"rhythm":true}},{"note":"E4","assessment":{"pitch":false,"rhythm":false}},{"note":"C4","assessment":{"pitch":false,"rhythm":true}},{"note":"B3","assessment":{"pitch":true,"rhythm":true}},{"note":"C4","assessment":{"pitch":false,"rhythm":true}},{"note":"B3","assessment":{"pitch":true,"rhythm":true}},{"note":"A2","assessment":{"pitch":true,"rhythm":true}},{"note":"C4","assessment":{"pitch":false,"rhythm":false}},{"note":"B3","assessment":{"pitch":false,"rhythm":false}},{"note":"E3","assessment":{"pitch":false,"rhythm":false}},{"note":"A2","assessment":{"pitch":false,"rhythm":true}},{"note":"E4","assessment":{"pitch":false,"rhythm":true}},{"note":"C4","assessment":{"pitch":false,"rhythm":true}},{"note":"B3","assessment":{"pitch":false,"rhythm":true}},{"note":"C4","assessment":{"pitch":false,"rhythm":true}},{"note":"B3","assessment":{"pitch":true,"rhythm":true}},{"note":"E2","assessment":{"pitch":true,"rhythm":true}},{"note":"B2","assessment":{"pitch":false,"rhythm":true}},{"note":"F#3/Gb3","assessment":{"pitch":true,"rhythm":true}},{"note":"G3","assessment":{"pitch":true,"rhythm":true}},{"note":"B3","assessment":{"pitch":true,"rhythm":true}},{"note":"E4","assessment":{"pitch":false,"rhythm":true}}]')},30:function(e,t,s){e.exports=s.p+"static/media/A_min9.cf9b03d2.wav"},31:function(e,t,s){e.exports=s.p+"static/media/C_major.970b368f.wav"},35:function(e,t,s){e.exports=s(68)},40:function(e,t,s){},41:function(e,t,s){},68:function(e,t,s){"use strict";s.r(t);var n=s(0),r=s.n(n),a=s(29),h=s.n(a),c=(s(40),s(2)),o=s(34),u=s(1),i=s(17),m=s(18),l=(s(41),s(11)),p=s(9),f=s(6),y=s.n(f),d=s(12),v=s(30),b=s.n(v),g=s(31),E=s.n(g),O={a_min:{url:"https://raw.githubusercontent.com/QED0711/osmd-test/main/src/scores/a_minor9_noteflight.xml",results:m,audio:b.a},c_maj:{url:"https://raw.githubusercontent.com/QED0711/osmd-test/feature/demo_results/src/scores/c_maj_noteflight.xml",results:i,indexTransform:[0,1,2,4,5,7,8,9,11,12,13,14,15,16,17,18,20,21,22,23,25,27,28,29,31,32,34,35,36,38,40,41,43,45,46,47,48],audio:E.a}},j=["Uploading","Uploading","Uploading","Uploading","Formatting Submission","Formatting Submission","Transcribing to MIDI","Transcribing to MIDI","Transcribing to MIDI","Transcribing to MIDI","Transcribing to MIDI","Transcribing to MIDI","Transcribing to MIDI","Formatting Results","Formatting Results"],w=function(e){var t=e.selectedScore,s=e.setSelectedScore,a=e.gradedFeature,h=e.setGradedFeature,o=e.displayResults,i=e.setDisplayResults,m=e.assessmentPercentages,l=(e.setAssessmentPercentages,Object(n.useState)(!1)),p=Object(c.a)(l,2),f=p[0],v=p[1],b=Object(n.useState)(0),g=Object(c.a)(b,2),E=g[0],w=g[1],S=Object(u.f)().songTitle;console.log({songTitle:S});var A=function(){var e=Object(d.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,new Promise((function(e){return setTimeout(e,15e3)}));case 3:v(!1),i(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(e){return function(){h(e)}};return Object(n.useEffect)((function(){if(f)var e=setInterval((function(){E>=15?clearInterval(e):w((function(e){return e+1}))}),1e3)}),[f]),Object(n.useEffect)((function(){S&&S in O&&(s(O[S]),h("overview"),i(!0))}),[S]),r.a.createElement("div",null,t&&r.a.createElement("div",{className:"sample-audio"},r.a.createElement("audio",{controls:!0},r.a.createElement("source",{src:t.audio,type:"audio/wav"}))),r.a.createElement("div",{id:"assessment-panel"},f&&r.a.createElement("h2",{id:"assessment-stage"},j[E],"..."),t&&!o&&!f&&r.a.createElement("button",{id:"assessment-button",class:"selected",onClick:A,disabled:o},"Assess Performance"),t&&o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"graded-feature-button ".concat("overview"===a?"selected":""),onClick:D("overview")},"Overview ",(100*(null===m||void 0===m?void 0:m.overall)).toFixed(2),"%"),r.a.createElement("button",{className:"graded-feature-button ".concat("pitch"===a?"selected":""),onClick:D("pitch")},"Pitch ",(100*(null===m||void 0===m?void 0:m.pitch)).toFixed(2),"%"),r.a.createElement("button",{className:"graded-feature-button ".concat("rhythm"===a?"selected":""),onClick:D("rhythm")},"Rhythm ",(100*(null===m||void 0===m?void 0:m.rhythm)).toFixed(2),"%"))))},S=function(e,t){var s=e.classList.value;if("vf-notehead"===s)e.querySelector("path").setAttribute("fill",t);else if("vf-tabnote"===s){var n,r=Object(l.a)(e.querySelectorAll("rect"));try{for(r.s();!(n=r.n()).done;){n.value.setAttribute("fill",t)}}catch(a){r.e(a)}finally{r.f()}}},A=s(23),D=function(e){var t=e.selectedScore,s=e.gradedFeature,a=e.displayResults,h=e.setAssessmentPercentages,o=Object(n.useState)(null),u=Object(c.a)(o,2),i=u[0],m=u[1],l=Object(n.useState)(null),f=Object(c.a)(l,2),v=f[0],b=f[1];return Object(n.useEffect)((function(){t&&fetch(t.url).then((function(e){return e.text()})).then((function(e){m(e)})).catch((function(e){console.log(e)}))}),[t]),Object(n.useEffect)((function(){if(i&&t){var e=new A.OpenSheetMusicDisplay("sheetmusic"),s=(new DOMParser).parseFromString(i,"text/xml");e.load(s).then(Object(d.a)(y.a.mark((function e(){var t,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=setInterval((function(){(t=Object(p.a)(document.querySelectorAll("svg")))&&(clearInterval(s),b(t))}),50);case 1:case"end":return e.stop()}}),e)}))))}}),[i,t]),Object(n.useEffect)((function(){v&&a&&v.forEach((function(e){var n=e.querySelectorAll(".vf-tabnote, .vf-notehead"),r=t.results,a=t.indexTransform;console.log(r.length);var c,o,u=t.results.filter((function(e){return e.assessment.pitch&&e.assessment.rhythm})).length/r.length,i=t.results.filter((function(e){return e.assessment.pitch})).length/r.length,m=t.results.filter((function(e){return e.assessment.rhythm})).length/r.length;h({overall:u,pitch:i,rhythm:m}),window.__matchedNotes=[],r.forEach((function(e,t){var h,u,i,m,l,p;switch(c=a?n[a[t]]:n[t],s){case"overview":o=(null===(h=r[t])||void 0===h||null===(u=h.assessment)||void 0===u?void 0:u.pitch)&&r[t].assessment.rhythm;break;case"pitch":o=null===(i=r[t])||void 0===i||null===(m=i.assessment)||void 0===m?void 0:m.pitch;break;case"rhythm":o=null===(l=r[t])||void 0===l||null===(p=l.assessment)||void 0===p?void 0:p.rhythm}S(c,o?"black":"red")}))}))}),[s,v,a]),r.a.createElement("div",{className:"container",style:{width:"95vw",margin:"0 auto"}},r.a.createElement("div",{id:"sheetmusic",style:{height:"auto",width:"95%",margin:"0 auto"}}))};s(23);var C=function(){var e=Object(n.useState)(null),t=Object(c.a)(e,2),s=(t[0],t[1],Object(n.useState)(null)),a=Object(c.a)(s,2),h=(a[0],a[1],Object(n.useState)(null)),i=Object(c.a)(h,2),m=i[0],l=i[1],p=Object(n.useState)(!1),f=Object(c.a)(p,2),y=f[0],d=f[1],v=Object(n.useState)("overview"),b=Object(c.a)(v,2),g=b[0],E=b[1],O=Object(n.useState)(null),j=Object(c.a)(O,2),S=j[0],A=j[1];return r.a.createElement(o.a,{basename:"/osmd-test"},r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/songs/:songTitle"},r.a.createElement("div",{className:"App"},r.a.createElement(w,{selectedScore:m,setSelectedScore:l,gradedFeature:g,setGradedFeature:E,displayResults:y,setDisplayResults:d,assessmentPercentages:S,setAssessmentPercentages:A}),r.a.createElement(D,{selectedScore:m,gradedFeature:g,displayResults:y,setAssessmentPercentages:A})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));h.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.3ba8b716.chunk.js.map